(()=>{var e={};e.id=446,e.ids=[446],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1587:(e,t,r)=>{"use strict";r.d(t,{z:()=>n});var a=r(6330);let n=global.prisma||new a.PrismaClient({log:["query"]})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6330:e=>{"use strict";e.exports=require("@prisma/client")},6487:()=>{},6846:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>b,routeModule:()=>g,serverHooks:()=>f,workAsyncStorage:()=>h,workUnitAsyncStorage:()=>v});var a={};r.r(a),r.d(a,{GET:()=>y});var n=r(2706),s=r(8203),o=r(5994),i=r(9187),c=r(1587);let l={appName:"EventMaker",environment:"production",isProduction:!0,isTest:!1,databaseUrl:"postgresql://placeholder:placeholder@placeholder:5432/placeholder?schema=public",authSecret:"placeholder-auth-secret-key",emailServer:{host:"smtp.example.com",port:Number("587")||587,auth:{user:"user@example.com",pass:"placeholder-password"}},emailFrom:"noreply@eventmaker.example.com",enablePublicRegistration:!0,maxEventsPerUser:Number("10")||10,defaultEventCapacity:Number("50")||50};async function u(){try{return await c.z.$connect(),console.log("✅ Database connection established"),!0}catch(e){return console.error("❌ Database connection failed:",e),!1}finally{await c.z.$disconnect()}}async function p(){console.log(`🚀 Starting ${l.appName} in ${l.environment} mode`);let e=function(){let e=["DATABASE_URL","AUTH_SECRET"].filter(e=>!process.env[e]);return!(e.length>0)||(console.warn(`⚠️ Missing required environment variables: ${e.join(", ")}`),!1)}();e||console.warn("⚠️ Application may not function correctly due to missing configuration");let t=await u();return t||console.error("❌ Application startup issue: Database connection failed"),{ready:e&&t,config:l}}async function d(){try{await c.z.$queryRaw`
      SELECT count(*) as count 
      FROM information_schema.tables 
      WHERE table_schema = 'public'
    `,console.log("\uD83D\uDD0D Database tables check completed");let e=await c.z.user.count();return 0===e?(console.log("\uD83C\uDF31 No users found. Database may need seeding."),console.log("ℹ️ For a test instance, you can manually seed data or create initial users through the UI")):console.log(`✅ Database has ${e} users`),!0}catch(e){return console.error("❌ Database setup error:",e),!1}}async function m(){let e={database:!1,environment:!1,ready:!1};try{let{ready:t}=await p();return e.ready=t,e.database=await d(),e.environment=["DATABASE_URL","AUTH_SECRET"].every(e=>!!process.env[e]),e.ready?console.log("✅ Application is ready to use"):console.warn("⚠️ Application is not fully configured. Some features may not work properly."),e}catch(t){return console.error("❌ Application readiness check failed:",t),e}finally{await c.z.$disconnect()}}async function y(){try{let e=await m();return i.NextResponse.json({status:"success",data:{ready:e.ready,checks:{database:e.database?"connected":"disconnected",environment:e.environment?"configured":"missing-config"},timestamp:new Date().toISOString()}})}catch(e){return console.error("System initialization API error:",e),i.NextResponse.json({status:"error",message:"Failed to initialize system",error:e instanceof Error?e.message:"Unknown error"},{status:500})}}let g=new n.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/system/init/route",pathname:"/api/system/init",filename:"route",bundlePath:"app/api/system/init/route"},resolvedPagePath:"C:\\Users\\steve\\eventmaker\\app\\api\\system\\init\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:h,workUnitAsyncStorage:v,serverHooks:f}=g;function b(){return(0,o.patchFetch)({workAsyncStorage:h,workUnitAsyncStorage:v})}},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,452],()=>r(6846));module.exports=a})();