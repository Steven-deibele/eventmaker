(()=>{var e={};e.id=446,e.ids=[446],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6330:e=>{"use strict";e.exports=require("@prisma/client")},6487:()=>{},6846:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>S,routeModule:()=>A,serverHooks:()=>f,workAsyncStorage:()=>R,workUnitAsyncStorage:()=>g});var n={};r.r(n),r.d(n,{GET:()=>y});var s=r(2706),a=r(8203),o=r(5994),i=r(9187),c=r(6330);let u=new c.PrismaClient,l={appName:process.env.APP_NAME||"EventMaker",environment:"production",isProduction:!0,isTest:!1,databaseUrl:process.env.DATABASE_URL,authSecret:process.env.AUTH_SECRET,emailServer:{host:process.env.EMAIL_SERVER_HOST,port:Number(process.env.EMAIL_SERVER_PORT)||587,auth:{user:process.env.EMAIL_SERVER_USER,pass:process.env.EMAIL_SERVER_PASSWORD}},emailFrom:process.env.EMAIL_FROM||"noreply@eventmaker.example.com",enablePublicRegistration:"true"===process.env.ENABLE_PUBLIC_REGISTRATION||!0,maxEventsPerUser:Number(process.env.MAX_EVENTS_PER_USER)||10,defaultEventCapacity:Number(process.env.DEFAULT_EVENT_CAPACITY)||50};async function p(){try{return await u.$connect(),console.log("✅ Database connection established"),!0}catch(e){return console.error("❌ Database connection failed:",e),!1}finally{await u.$disconnect()}}async function d(){console.log(`🚀 Starting ${l.appName} in ${l.environment} mode`);let e=function(){let e=["DATABASE_URL","AUTH_SECRET"].filter(e=>!process.env[e]);return!(e.length>0)||(console.warn(`⚠️ Missing required environment variables: ${e.join(", ")}`),!1)}();e||console.warn("⚠️ Application may not function correctly due to missing configuration");let t=await p();return t||console.error("❌ Application startup issue: Database connection failed"),{ready:e&&t,config:l}}let m=new c.PrismaClient;async function E(){try{await m.$queryRaw`
      SELECT count(*) as count 
      FROM information_schema.tables 
      WHERE table_schema = 'public'
    `,console.log("\uD83D\uDD0D Database tables check completed");let e=await m.user.count();return 0===e?(console.log("\uD83C\uDF31 No users found. Database may need seeding."),console.log("ℹ️ For a test instance, you can manually seed data or create initial users through the UI")):console.log(`✅ Database has ${e} users`),!0}catch(e){return console.error("❌ Database setup error:",e),!1}}async function v(){let e={database:!1,environment:!1,ready:!1};try{let{ready:t}=await d();return e.ready=t,e.database=await E(),e.environment=["DATABASE_URL","AUTH_SECRET"].every(e=>!!process.env[e]),e.ready?console.log("✅ Application is ready to use"):console.warn("⚠️ Application is not fully configured. Some features may not work properly."),e}catch(t){return console.error("❌ Application readiness check failed:",t),e}finally{await m.$disconnect()}}async function y(){try{let e=await v();return i.NextResponse.json({status:"success",data:{ready:e.ready,checks:{database:e.database?"connected":"disconnected",environment:e.environment?"configured":"missing-config"},timestamp:new Date().toISOString()}})}catch(e){return console.error("System initialization API error:",e),i.NextResponse.json({status:"error",message:"Failed to initialize system",error:e instanceof Error?e.message:"Unknown error"},{status:500})}}let A=new s.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/system/init/route",pathname:"/api/system/init",filename:"route",bundlePath:"app/api/system/init/route"},resolvedPagePath:"C:\\Users\\steve\\eventmaker\\app\\api\\system\\init\\route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:R,workUnitAsyncStorage:g,serverHooks:f}=A;function S(){return(0,o.patchFetch)({workAsyncStorage:R,workUnitAsyncStorage:g})}},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,452],()=>r(6846));module.exports=n})();